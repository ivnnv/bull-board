{"version":3,"file":"static/js/async/src_pages_QueuePage_QueuePage_tsx.js","sources":["/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/Pagination/Pagination.module.css","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/QueueActions/QueueActions.module.css","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/QueueDropdownActions/QueueDropdownActions.module.css","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/StatusMenu/MobileStatusDropdown.module.css","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/StatusMenu/StatusMenu.module.css","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/Icons/Add.tsx","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/Icons/ArrowRight.tsx","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/Icons/EllipsisVertical.tsx","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/Pagination/Pagination.tsx","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/QueueActions/QueueActions.tsx","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/QueueDropdownActions/QueueDropdownActions.tsx","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/StatusMenu/MobileStatusDropdown.tsx","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/components/StatusMenu/StatusMenu.tsx","/Users/ivnnv/Sites/ivnnv/bull-board/packages/ui/src/pages/QueuePage/QueuePage.tsx"],"sourcesContent":["// extracted by css-extract-rspack-plugin\nexport default {\"pagination\":\"src-components-Pagination-Pagination-module__pagination-Jxux8S\",\"isActive\":\"src-components-Pagination-Pagination-module__isActive-mi6SmB\",\"disabled\":\"src-components-Pagination-Pagination-module__disabled-AC9vJS\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"pagination\\\":\\\"src-components-Pagination-Pagination-module__pagination-Jxux8S\\\",\\\"isActive\\\":\\\"src-components-Pagination-Pagination-module__isActive-mi6SmB\\\",\\\"disabled\\\":\\\"src-components-Pagination-Pagination-module__disabled-AC9vJS\\\"}\";\n        // 1756647378714\n        var cssReload = require(\"../../../../../node_modules/@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","// extracted by css-extract-rspack-plugin\nexport default {\"queueActions\":\"src-components-QueueActions-QueueActions-module__queueActions-dnGfku\",\"button\":\"src-components-QueueActions-QueueActions-module__button-nYphDd\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"queueActions\\\":\\\"src-components-QueueActions-QueueActions-module__queueActions-dnGfku\\\",\\\"button\\\":\\\"src-components-QueueActions-QueueActions-module__button-nYphDd\\\"}\";\n        // 1756647378715\n        var cssReload = require(\"../../../../../node_modules/@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","// extracted by css-extract-rspack-plugin\nexport default {\"trigger\":\"src-components-QueueDropdownActions-QueueDropdownActions-module__trigger-GNtOnV\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"trigger\\\":\\\"src-components-QueueDropdownActions-QueueDropdownActions-module__trigger-GNtOnV\\\"}\";\n        // 1756647378720\n        var cssReload = require(\"../../../../../node_modules/@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","// extracted by css-extract-rspack-plugin\nexport default {\"container\":\"src-components-StatusMenu-MobileStatusDropdown-module__container-tOA25Y\",\"statusDropdown\":\"src-components-StatusMenu-MobileStatusDropdown-module__statusDropdown-AvqQNb\",\"trigger\":\"src-components-StatusMenu-MobileStatusDropdown-module__trigger-sZOKtX\",\"currentStatus\":\"src-components-StatusMenu-MobileStatusDropdown-module__currentStatus-KQcp3R\",\"currentBadge\":\"src-components-StatusMenu-MobileStatusDropdown-module__currentBadge-DB8zhz\",\"chevron\":\"src-components-StatusMenu-MobileStatusDropdown-module__chevron-A5Zkyz\",\"open\":\"src-components-StatusMenu-MobileStatusDropdown-module__open-ABM1PK\",\"backdrop\":\"src-components-StatusMenu-MobileStatusDropdown-module__backdrop-Xdw2Z9\",\"dropdown\":\"src-components-StatusMenu-MobileStatusDropdown-module__dropdown-zzQvfz\",\"item\":\"src-components-StatusMenu-MobileStatusDropdown-module__item-jVQ9Ck\",\"active\":\"src-components-StatusMenu-MobileStatusDropdown-module__active-KRdXLG\",\"statusName\":\"src-components-StatusMenu-MobileStatusDropdown-module__statusName-gpOSFw\",\"badge\":\"src-components-StatusMenu-MobileStatusDropdown-module__badge-mkV7RW\",\"actionsContainer\":\"src-components-StatusMenu-MobileStatusDropdown-module__actionsContainer-jo1N48\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"container\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__container-tOA25Y\\\",\\\"statusDropdown\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__statusDropdown-AvqQNb\\\",\\\"trigger\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__trigger-sZOKtX\\\",\\\"currentStatus\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__currentStatus-KQcp3R\\\",\\\"currentBadge\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__currentBadge-DB8zhz\\\",\\\"chevron\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__chevron-A5Zkyz\\\",\\\"open\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__open-ABM1PK\\\",\\\"backdrop\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__backdrop-Xdw2Z9\\\",\\\"dropdown\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__dropdown-zzQvfz\\\",\\\"item\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__item-jVQ9Ck\\\",\\\"active\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__active-KRdXLG\\\",\\\"statusName\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__statusName-gpOSFw\\\",\\\"badge\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__badge-mkV7RW\\\",\\\"actionsContainer\\\":\\\"src-components-StatusMenu-MobileStatusDropdown-module__actionsContainer-jo1N48\\\"}\";\n        // 1756647378730\n        var cssReload = require(\"../../../../../node_modules/@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","// extracted by css-extract-rspack-plugin\nexport default {\"statusMenu\":\"src-components-StatusMenu-StatusMenu-module__statusMenu-MKEeK1\",\"active\":\"src-components-StatusMenu-StatusMenu-module__active-doMaqb\",\"badge\":\"src-components-StatusMenu-StatusMenu-module__badge-IioYbb\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"statusMenu\\\":\\\"src-components-StatusMenu-StatusMenu-module__statusMenu-MKEeK1\\\",\\\"active\\\":\\\"src-components-StatusMenu-StatusMenu-module__active-doMaqb\\\",\\\"badge\\\":\\\"src-components-StatusMenu-StatusMenu-module__badge-IioYbb\\\"}\";\n        // 1756647378712\n        var cssReload = require(\"../../../../../node_modules/@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","import React from 'react';\n\nexport const AddIcon = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\">\n    <path d=\"M64 80c-8.8 0-16 7.2-16 16v320c0 8.8 7.2 16 16 16h320c8.8 0 16-7.2 16-16V96c0-8.8-7.2-16-16-16H64zM0 96c0-35.3 28.7-64 64-64h320c35.3 0 64 28.7 64 64v320c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zm200 248v-64h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24h64v-64c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport const ArrowRightIcon = () => (\n  <svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\">\n    <path d=\"M24.707 38.101L4.908 57.899c-4.686 4.686-4.686 12.284 0 16.971L185.607 256 4.908 437.13c-4.686 4.686-4.686 12.284 0 16.971L24.707 473.9c4.686 4.686 12.284 4.686 16.971 0l209.414-209.414c4.686-4.686 4.686-12.284 0-16.971L41.678 38.101c-4.687-4.687-12.285-4.687-16.971 0z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport const EllipsisVerticalIcon = () => (\n  <svg aria-hidden=\"true\" role=\"img\"\n       xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 512\"\n       >\n    <path\n      d=\"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z\"\n    ></path>\n  </svg>\n);\n","import ReactPaginate from 'react-paginate';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { RouteComponentProps } from 'react-router';\nimport s from './Pagination.module.css';\nimport { ArrowLeftIcon } from '../Icons/ArrowLeft';\nimport { ArrowRightIcon } from '../Icons/ArrowRight';\n\ninterface IPaginationProps extends RouteComponentProps {\n  pageCount: number;\n}\n\nclass PaginationInner extends React.PureComponent<IPaginationProps> {\n  constructor(props: IPaginationProps) {\n    super(props);\n\n    this.hrefBuilder = this.hrefBuilder.bind(this);\n    this.handlePageChange = this.handlePageChange.bind(this);\n  }\n\n  render() {\n    const { pageCount } = this.props;\n\n    if (pageCount <= 1) {\n      return null;\n    }\n\n    const {\n      location: { search },\n    } = this.props;\n    const query = new URLSearchParams(search);\n\n    const pageIdx = (Number(query.get('page')) || 1) - 1;\n\n    return (\n      <ReactPaginate\n        forcePage={pageIdx}\n        previousLabel={<ArrowLeftIcon />}\n        nextLabel={<ArrowRightIcon />}\n        breakLabel={'...'}\n        breakClassName={s.breakMe}\n        pageCount={pageCount}\n        marginPagesDisplayed={2}\n        pageRangeDisplayed={3}\n        onPageChange={this.handlePageChange}\n        containerClassName={s.pagination}\n        activeClassName={s.isActive}\n        disabledClassName={s.disabled}\n        hrefBuilder={this.hrefBuilder}\n      />\n    );\n  }\n\n  private handlePageChange({ selected }: { selected: number }) {\n    const {\n      location: { search, pathname },\n      history,\n    } = this.props;\n\n    const query = new URLSearchParams(search);\n    if (selected > 0) {\n      query.set('page', `${selected + 1}`);\n    } else {\n      query.delete('page');\n    }\n    query.sort();\n\n    history.push({ pathname, search: query.toString() });\n  }\n\n  private hrefBuilder(pageIndex: number) {\n    const {\n      location: { search },\n    } = this.props;\n\n    const query = new URLSearchParams(search);\n    if (pageIndex > 0) {\n      query.set('page', `${pageIndex}`);\n      query.sort();\n    }\n    return query.toString();\n  }\n}\n\nexport const Pagination = withRouter(PaginationInner);\n","import { STATUSES } from '@bull-board/api/constants/statuses';\nimport type { AppQueue, JobCleanStatus, JobRetryStatus, Status } from '@bull-board/api/typings/app';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { QueueActions as QueueActionsType } from '../../../typings/app';\nimport { Button } from '../Button/Button';\nimport { PromoteIcon } from '../Icons/Promote';\nimport { RetryIcon } from '../Icons/Retry';\nimport { TrashIcon } from '../Icons/Trash';\nimport s from './QueueActions.module.css';\n\ninterface QueueActionProps {\n  queue: AppQueue;\n  actions: QueueActionsType;\n  status: Status;\n  allowRetries: boolean;\n}\n\nconst ACTIONABLE_STATUSES = [STATUSES.failed, STATUSES.delayed, STATUSES.completed] as const;\n\nconst isStatusActionable = (status: any): boolean => ACTIONABLE_STATUSES.includes(status);\n\nfunction isCleanAllStatus(status: any): status is JobCleanStatus {\n  return [STATUSES.failed, STATUSES.delayed, STATUSES.completed].includes(status);\n}\n\nfunction isRetryAllStatus(status: any): status is JobRetryStatus {\n  return [STATUSES.failed, STATUSES.completed].includes(status);\n}\n\nfunction isPromoteAllStatus(status: any): status is JobRetryStatus {\n  return [STATUSES.delayed].includes(status);\n}\n\nexport const QueueActions = ({ status, actions, queue, allowRetries }: QueueActionProps) => {\n  const { t } = useTranslation();\n  if (!isStatusActionable(status)) {\n    return null;\n  }\n\n  return (\n    <ul className={s.queueActions}>\n      {isRetryAllStatus(status) && allowRetries && (\n        <li>\n          <Button onClick={actions.retryAll(queue.name, status)} className={s.button}>\n            <RetryIcon />\n            {t('QUEUE.ACTIONS.RETRY_ALL')}\n          </Button>\n        </li>\n      )}\n      {isPromoteAllStatus(status) && (\n        <li>\n          <Button onClick={actions.promoteAll(queue.name)} className={s.button}>\n            <PromoteIcon />\n            {t('QUEUE.ACTIONS.PROMOTE_ALL')}\n          </Button>\n        </li>\n      )}\n      {isCleanAllStatus(status) && (\n        <li>\n          <Button onClick={actions.cleanAll(queue.name, status)} className={s.button}>\n            <TrashIcon />\n            {t('QUEUE.ACTIONS.CLEAN_ALL')}\n          </Button>\n        </li>\n      )}\n    </ul>\n  );\n};\n","import type { AppQueue } from '@bull-board/api/typings/app';\nimport { Item, Portal, Root, Trigger } from '@radix-ui/react-dropdown-menu';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { QueueActions } from '../../../typings/app';\nimport { Button } from '../Button/Button';\nimport { DropdownContent } from '../DropdownContent/DropdownContent';\nimport { AddIcon } from '../Icons/Add';\nimport { EllipsisVerticalIcon } from '../Icons/EllipsisVertical';\nimport { PauseIcon } from '../Icons/Pause';\nimport { PlayIcon } from '../Icons/Play';\nimport { TrashIcon } from '../Icons/Trash';\nimport s from './QueueDropdownActions.module.css';\n\nexport const QueueDropdownActions = ({\n  queue,\n  actions,\n}: {\n  queue: AppQueue;\n  actions: Omit<QueueActions, 'addJob'> & { addJob: () => void };\n}) => {\n  const { t } = useTranslation();\n\n  return (\n    <Root>\n      <Trigger asChild>\n        <Button className={s.trigger}>\n          <EllipsisVerticalIcon />\n        </Button>\n      </Trigger>\n\n      <Portal>\n        <DropdownContent align=\"end\">\n          <Item onSelect={actions.addJob}>\n            <AddIcon />\n            {t('QUEUE.ACTIONS.ADD_JOB')}\n          </Item>\n          <Item\n            onSelect={\n              queue.isPaused ? actions.resumeQueue(queue.name) : actions.pauseQueue(queue.name)\n            }\n          >\n            {queue.isPaused ? (\n              <>\n                <PlayIcon />\n                {t('QUEUE.ACTIONS.RESUME')}\n              </>\n            ) : (\n              <>\n                <PauseIcon />\n                {t('QUEUE.ACTIONS.PAUSE')}\n              </>\n            )}\n          </Item>\n          <Item onSelect={actions.emptyQueue(queue.name)}>\n            <TrashIcon />\n            {t('QUEUE.ACTIONS.EMPTY')}\n          </Item>\n        </DropdownContent>\n      </Portal>\n    </Root>\n  );\n};\n","import { AppQueue, Status } from '@bull-board/api/typings/app';\nimport cn from 'clsx';\nimport React, { PropsWithChildren } from 'react';\nimport * as DropdownMenu from '@radix-ui/react-dropdown-menu';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router-dom';\nimport { links } from '../../utils/links';\nimport { DropdownContent } from '../DropdownContent/DropdownContent';\nimport { ChevronDown } from '../Icons/ChevronDown';\nimport s from './MobileStatusDropdown.module.css';\n\nexport const MobileStatusDropdown = ({ queue, children }: PropsWithChildren<{ queue: AppQueue }>) => {\n  const { t } = useTranslation();\n  const history = useHistory();\n\n  // Get current status from URL\n  const getCurrentStatus = (): Status => {\n    const search = new URLSearchParams(history.location.search);\n    return (search.get('status') as Status) || 'latest';\n  };\n\n  const currentStatus = getCurrentStatus();\n  const currentStatusDisplay = t(`QUEUE.STATUS.${currentStatus.toUpperCase()}`).toLocaleUpperCase();\n  const currentCount = (queue.counts as any)[currentStatus] || 0;\n\n  const handleStatusSelect = (status: Status) => {\n    const isLatest = status === 'latest';\n    const { pathname, search } = links.queuePage(queue.name, isLatest ? {} : { [queue.name]: status });\n    history.push({ pathname, search });\n  };\n\n  return (\n    <div className={s.container}>\n      <div className={s.statusDropdown}>\n        <DropdownMenu.Root>\n          <DropdownMenu.Trigger className={s.trigger} asChild>\n            <button>\n              <span className={s.currentStatus}>\n                {currentStatusDisplay}\n                {currentCount > 0 && <span className={s.currentBadge}>{currentCount}</span>}\n              </span>\n              <ChevronDown className={s.chevron} />\n            </button>\n          </DropdownMenu.Trigger>\n\n          <DropdownMenu.Portal>\n            <DropdownContent sideOffset={5}>\n              {queue.statuses.map((status) => {\n                const isLatest = status === 'latest';\n                const displayStatus = t(`QUEUE.STATUS.${status.toUpperCase()}`).toLocaleUpperCase();\n                const count = (queue.counts as any)[status] || 0;\n                const isActive = currentStatus === status || (isLatest && currentStatus === 'latest');\n\n                return (\n                  <DropdownMenu.Item\n                    key={`${queue.name}-${status}`}\n                    className={cn(s.item, { [s.active]: isActive })}\n                    onSelect={() => handleStatusSelect(status)}\n                  >\n                    <span className={s.statusName}>{displayStatus}</span>\n                    {count > 0 && <span className={s.badge}>{count}</span>}\n                  </DropdownMenu.Item>\n                );\n              })}\n            </DropdownContent>\n          </DropdownMenu.Portal>\n        </DropdownMenu.Root>\n      </div>\n\n      <div className={s.actionsContainer}>\n        {children}\n      </div>\n    </div>\n  );\n};\n","import type { AppQueue } from '@bull-board/api/typings/app';\nimport React, { PropsWithChildren } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { NavLink } from 'react-router-dom';\nimport { useMediaQuery } from '../../hooks/useMediaQuery';\nimport { links } from '../../utils/links';\nimport { MobileStatusDropdown } from './MobileStatusDropdown';\nimport s from './StatusMenu.module.css';\n\nexport const StatusMenu = ({ queue, children }: PropsWithChildren<{ queue: AppQueue }>) => {\n  const { t } = useTranslation();\n  const isMobile = useMediaQuery('(max-width: 768px)');\n\n  if (isMobile) {\n    return (\n      <MobileStatusDropdown queue={queue}>\n        {children}\n      </MobileStatusDropdown>\n    );\n  }\n\n  return (\n    <div className={s.statusMenu}>\n      {queue.statuses.map((status) => {\n        const isLatest = status === 'latest';\n        const displayStatus = t(`QUEUE.STATUS.${status.toUpperCase()}`).toLocaleUpperCase();\n        return (\n          <NavLink\n            to={links.queuePage(queue.name, { [queue.name]: status })}\n            activeClassName={s.active}\n            isActive={(_path, { search }) => {\n              const query = new URLSearchParams(search);\n              return query.get('status') === status || (isLatest && query.get('status') === null);\n            }}\n            key={`${queue.name}-${status}`}\n          >\n            <span title={displayStatus}>{displayStatus}</span>\n            {queue.counts[status] > 0 && <span className={s.badge}>{queue.counts[status]}</span>}\n          </NavLink>\n        );\n      })}\n      {!!children && <div>{children}</div>}\n    </div>\n  );\n};\n","import { STATUSES } from '@bull-board/api/constants/statuses';\nimport type { AppJob, JobRetryStatus } from '@bull-board/api/typings/app';\nimport React, { Suspense } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { JobCard } from '../../components/JobCard/JobCard';\nimport { Pagination } from '../../components/Pagination/Pagination';\nimport { QueueActions } from '../../components/QueueActions/QueueActions';\nimport { QueueDropdownActions } from '../../components/QueueDropdownActions/QueueDropdownActions';\nimport { StatusMenu } from '../../components/StatusMenu/StatusMenu';\nimport { StickyHeader } from '../../components/StickyHeader/StickyHeader';\nimport { useActiveQueue } from '../../hooks/useActiveQueue';\nimport { useJob } from '../../hooks/useJob';\nimport { useModal } from '../../hooks/useModal';\nimport { useQueues } from '../../hooks/useQueues';\nimport { useSelectedStatuses } from '../../hooks/useSelectedStatuses';\nimport { links } from '../../utils/links';\n\nconst AddJobModalLazy = React.lazy(() =>\n  import('../../components/AddJobModal/AddJobModal').then(({ AddJobModal }) => ({\n    default: AddJobModal,\n  }))\n);\n\nconst UpdateJobDataModalLazy = React.lazy(() =>\n  import('../../components/UpdateJobDataModal/UpdateJobDataModal').then(\n    ({ UpdateJobDataModal }) => ({\n      default: UpdateJobDataModal,\n    })\n  )\n);\n\nexport const QueuePage = () => {\n  const { t } = useTranslation();\n  const selectedStatus = useSelectedStatuses();\n  const { actions } = useQueues();\n  const { actions: jobActions } = useJob();\n  const queue = useActiveQueue();\n  const modal = useModal<'addJob' | 'updateJobData'>();\n  const [editJob, setEditJob] = React.useState<AppJob | null>(null);\n\n  actions.pollQueues();\n\n  if (!queue) {\n    return <section>{t('QUEUE.NOT_FOUND')}</section>;\n  }\n\n  const status = selectedStatus[queue.name];\n  const isLatest = status === STATUSES.latest;\n\n  return (\n    <section>\n      <StickyHeader\n        actions={\n          <>\n            <div>\n              {queue.jobs.length > 0 && !queue.readOnlyMode && (\n                <QueueActions\n                  queue={queue}\n                  actions={actions}\n                  status={selectedStatus[queue.name]}\n                  allowRetries={\n                    (selectedStatus[queue.name] == 'failed' || queue.allowCompletedRetries) &&\n                    queue.allowRetries\n                  }\n                />\n              )}\n            </div>\n            <Pagination pageCount={queue.pagination.pageCount} />\n          </>\n        }\n      >\n        <StatusMenu queue={queue}>\n          {!queue.readOnlyMode && (\n            <QueueDropdownActions\n              queue={queue}\n              actions={{ ...actions, addJob: () => modal.open('addJob') }}\n            />\n          )}\n        </StatusMenu>\n      </StickyHeader>\n      {queue.jobs.map((job) => (\n        <JobCard\n          key={job.id}\n          job={job}\n          jobUrl={links.jobPage(queue.name, `${job.id}`, selectedStatus)}\n          status={isLatest && job.isFailed ? STATUSES.failed : status}\n          actions={{\n            cleanJob: jobActions.cleanJob(queue.name)(job),\n            promoteJob: jobActions.promoteJob(queue.name)(job),\n            retryJob: jobActions.retryJob(queue.name, status as JobRetryStatus)(job),\n            getJobLogs: jobActions.getJobLogs(queue.name)(job),\n            updateJobData: () => {\n              setEditJob(job);\n              modal.open('updateJobData');\n            },\n            duplicateJob: () => {\n              setEditJob(job);\n              modal.open('addJob');\n            },\n          }}\n          readOnlyMode={queue?.readOnlyMode}\n          allowRetries={(job.isFailed || queue.allowCompletedRetries) && queue.allowRetries}\n        />\n      ))}\n      <Suspense fallback={null}>\n        {modal.isMounted('addJob') && (\n          <AddJobModalLazy\n            open={modal.isOpen('addJob')}\n            onClose={modal.close('addJob')}\n            job={editJob}\n          />\n        )}\n        {modal.isMounted('updateJobData') && !!editJob && (\n          <UpdateJobDataModalLazy\n            open={modal.isOpen('updateJobData')}\n            onClose={() => {\n              setEditJob(null);\n              modal.close('updateJobData');\n            }}\n            job={editJob}\n          />\n        )}\n      </Suspense>\n    </section>\n  );\n};\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AAEA;AACA;AAAA;AACA;AAAA;;;;;;;;;;AAEA;AAJA;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;;;;;;;;;;AAEA;AAJA;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AACA;;;;;;;;;;AAGA;AARA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AAEA;AACA;AACA;AAMA;AAQA;AACA;AAEA;AACA;AACA;AAEA;AAGA;AAEA;AAEA;AAEA;AACA;;;;;AACA;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAGA;AAEA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AApEA;AACA;AAEA;AACA;AACA;AAgEA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpFA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AASA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;;AACA;AACA;AACA;AACA;AAEA;AACA;;AACA;AAEA;AAAA;AAAA;;AACA;;;;;AACA;;;;;;;;;;;;AAIA;AAEA;AAAA;AAAA;;AACA;;;;;AACA;;;;;;;;;;;;AAIA;AAEA;AAAA;AAAA;;AACA;;;;;AACA;;;;;;;;;;;;;;;;;;AAMA;AAlCA;;AACA;;;AADA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;;AAOA;AAEA;;AAEA;AAAA;AACA;AAAA;AACA;;;;;;;;;;;;;;;AAIA;AACA;AAAA;;AACA;AAAA;;AACA;;;;;AACA;;;;;;;AAEA;AACA;AAIA;;AAEA;;;;;AACA;;AAGA;;AACA;;;;;AACA;;;;;;;;AAIA;AAAA;;AACA;;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;AAMA;AAhDA;;AAOA;;;AAPA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;;AACA;AAAA;AACA;;AACA;AAAA;AAAA;AACA;;AACA;AAAA;;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;AAEA;AAAA;;;;;;;;;;;;;;;;;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAAA;AAAA;AACA;;AAEA;AAAA;AAAA;;;;;;AACA;AAAA;AAAA;;;;;;;AALA;;;;;AAQA;;;;;;;;;;;;;;;;;;;;;;AAMA;AAAA;AACA;;;;;;;;;;;;AAIA;AA/DA;;AACA;AACA;;;AAFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;AAGA;AAEA;AACA;;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;;AAGA;AAAA;AAAA;;;;;;AACA;AAAA;AAAA;;;;;;;AAHA;;;;;AAMA;AACA;AAAA;;;;;;;;;;;;AAGA;AAnCA;;AACA;AACA;;;AAFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;;AAHA;AAMA;AAEA;AAAA;AACA;AACA;;AAJA;AAQA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;;;;;;AACA;AAEA;AACA;AAEA;;AAEA;AACA;;AAEA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;AAOA;AAAA;;;;;;;;AAIA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;AAKA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;;;;;AAsBA;AAAA;;AACA;AAEA;AACA;AACA;;;;;;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAMA;AA9FA;;AACA;AACA;AACA;AACA;AACA;AACA;;;AANA"}